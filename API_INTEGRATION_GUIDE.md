
# API Поискового Движка - Полная Инструкция для Интеграции с Тильдой

## Обзор API

Наш поисковый движок предоставляет REST API для интеграции поиска в сайты на Тильде. API позволяет выполнять поиск по проиндексированному контенту и получать структурированные результаты.

### Базовый URL
```
https://your-domain.com/api
```

## Основной Endpoint для Поиска

### GET /api/search

**Описание:** Выполняет поиск по проиндексированному контенту сайта

**Параметры запроса:**
- `q` (string, обязательный) - Поисковый запрос
- `limit` (number, необязательный) - Количество результатов (по умолчанию: 10, максимум: 50)
- `offset` (number, необязательный) - Смещение для пагинации (по умолчанию: 0)
- `page` (number, необязательный) - Номер страницы (альтернатива offset)

**Пример запроса:**
```
GET /api/search?q=услуги&limit=5&page=1
```

**Структура ответа:**
```json
{
  "results": [
    {
      "id": "page-uuid",
      "title": "Заголовок страницы",
      "url": "https://example.com/page",
      "content": "Текстовое содержимое страницы...",
      "metaDescription": "Мета-описание страницы",
      "siteId": "site-uuid"
    }
  ],
  "total": 25,
  "page": 1,
  "limit": 5,
  "totalPages": 5
}
```

## Дополнительные API Endpoints

### GET /api/stats
Возвращает статистику по индексированным сайтам и страницам.

### GET /api/sites
Возвращает список всех индексированных сайтов.

### GET /api/pages
Возвращает список всех индексированных страниц.

## Интеграция с Zero Блоком Тильды

### Требования для Zero блока:
1. **HTML структура** - контейнеры для поля ввода, кнопки поиска и результатов
2. **CSS стили** - оформление элементов поиска
3. **JavaScript логика** - обработка поиска и отображение результатов

### Основные функции JavaScript:
1. `performSearch(query)` - выполнение поискового запроса
2. `displayResults(data)` - отображение результатов поиска
3. `showLoading()` - показ индикатора загрузки
4. `handleError(error)` - обработка ошибок

### Структура HTML элементов:
```html
<div id="search-container">
  <input type="text" id="search-input" placeholder="Поиск по сайту...">
  <button id="search-button">Найти</button>
  <div id="search-results"></div>
  <div id="search-stats"></div>
</div>
```

### Обязательные CSS классы:
- `.search-container` - основной контейнер
- `.search-input` - поле ввода
- `.search-button` - кнопка поиска
- `.search-results` - контейнер результатов
- `.search-result-item` - отдельный результат
- `.result-title` - заголовок результата
- `.result-url` - URL результата
- `.result-description` - описание результата

### JavaScript функциональность:
1. **Обработка ввода с задержкой (debounce)** - 300ms задержка для живого поиска
2. **Поиск по Enter** - выполнение поиска при нажатии Enter
3. **Отображение статистики** - показ количества найденных результатов
4. **Обработка ошибок** - показ сообщений об ошибках
5. **Валидация** - проверка наличия поискового запроса

### Пример вызова API:
```javascript
async function performSearch(query) {
  const response = await fetch(`https://your-domain.com/api/search?q=${encodeURIComponent(query)}&limit=10`);
  const data = await response.json();
  return data;
}
```

### Обработка результатов:
```javascript
function displayResults(data) {
  if (data.results.length === 0) {
    // Показать "Ничего не найдено"
    return;
  }
  
  data.results.forEach(result => {
    // Создать HTML для каждого результата:
    // - result.title (заголовок)
    // - result.url (ссылка)
    // - result.metaDescription или result.content (описание)
  });
}
```

### Рекомендации по UX:
1. **Индикатор загрузки** - показывать "Поиск..." во время запроса
2. **Валидация ввода** - не выполнять поиск для пустых запросов
3. **Открытие в новой вкладке** - добавлять `target="_blank"` к ссылкам результатов
4. **Адаптивный дизайн** - корректное отображение на мобильных устройствах
5. **Кеширование** - сохранение результатов для повторных запросов

### Конфигурация для ChatGPT:
```
Создай код для Zero блока Тильды со следующими требованиями:

1. Современный дизайн поискового поля с кнопкой
2. Адаптивная верстка для всех устройств
3. Живой поиск с задержкой 300ms
4. Красивое отображение результатов с заголовками, ссылками и описаниями
5. Индикатор загрузки и обработка ошибок
6. Подсветка ключевых слов в результатах (опционально)
7. Пагинация для большого количества результатов
8. Анимации и плавные переходы

API Endpoint: https://your-domain.com/api/search
Параметры: q (запрос), limit (лимит), page (страница)

Структура ответа API указана выше в документации.
```

### Примеры стилизации:
- **Минималистичный стиль** - чистые линии, без теней
- **Google-подобный** - широкое поле с закругленными углами
- **Корпоративный** - цвета бренда, строгие формы
- **Темная тема** - поддержка темного режима

### Безопасность:
1. **Валидация ввода** - очистка пользовательского ввода
2. **Защита от XSS** - экранирование HTML в результатах
3. **Rate limiting** - ограничение частоты запросов
4. **CORS** - настройка для кроссдоменных запросов

### Оптимизация производительности:
1. **Debounce** - задержка для живого поиска
2. **Кеширование** - сохранение результатов в localStorage
3. **Ленивая загрузка** - постепенная подгрузка результатов
4. **Минификация** - сжатие CSS и JS кода

Этот документ содержит всю необходимую информацию для создания полнофункционального поиска в Zero блоке Тильды.
